<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tabbed Table</title>
<style>
    .tab-content {
        display: none;
    }
    .active {
        display: block;
    }
</style>
</head>
<body>

<div id="tab-buttons">
    <button onclick="showTab('students')">Students</button>
    <button onclick="showTab('teachers')">Teachers</button>
    <button onclick="showTab('admins')">Admin</button>
</div>

<div id="students" class="tab-content active">
    <table border="1">
        <tr>
            <th>Name</th>
            <th>Kastriert</th>
	    <th>Stars</th>
	    <!--	    <th>Update</th> -->
        </tr>

    </table>
</div>

<div id="teachers" class="tab-content">
	CRUD teacher
</div>

<div id="admins" class="tab-content">
	(new badge, edit badge, delete badge, asssign)
</div>

<script>
    function showTab(tabId) {
        var contents = document.querySelectorAll('.tab-content');
        for (var i = 0; i < contents.length; i++) {
            contents[i].classList.remove('active');
        }
        document.getElementById(tabId).classList.add('active');
    }

	/*
fetch('/students')
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));
*/

function updateButtons() {

}

async function populateTable(tableId, edit=false) {
    try {
        const response = await fetch('/students');
        const data = await response.json();

        // Get the table element
        const table = document.querySelector(tableId);

        // Remove any existing rows (except the header)
        //table.querySelectorAll('tr:not(:first-child)').forEach(row => row.remove());

        // Populate the table with new data
        data.forEach(student => {
            const row = table.insertRow();
            row.insertCell().textContent = student.name;
            row.insertCell().textContent = student.castrated;
	    if(!edit)
            	row.insertCell().textContent = student.stars;
	    else
            	row.insertCell().textContent = student.stars;
        });
    } catch (error) {
        console.error('Error:', error);
    }
}

populateTable('#students table');
//populateTable('#teachers table', true);



</script>

</body>
</html>

